{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/components/mansonry.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/mansonry.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/mansonry.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2R,GACxT,yDACA","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/components/mansonry.jsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/mansonry.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/mansonry.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuQ,GACpS,qCACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/lib/supabaseClient.jsx"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\nconst supabaseUrl = 'https://utyaegtlratnhymumqjm.supabase.co'\r\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV0eWFlZ3RscmF0bmh5bXVtcWptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMzNTU5MDUsImV4cCI6MjA1ODkzMTkwNX0.B2-GTy9rJPgGTmDeB70CwfzbbTTdocp-1QzRaMNDntQ'\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);\r\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,cAAc;AACpB,MAAM,cAAc;AACb,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/lib/utils.js"],"sourcesContent":["export const slugify = (text) => {\r\n    return text\r\n        .normalize(\"NFD\")\r\n        .replace(/[\\u0300-\\u036f]/g, \"\")\r\n        .toLowerCase()\r\n        .trim()\r\n        .replace(/\\s+/g, \"-\")\r\n        .replace(/[^\\w-]+/g, \"\");\r\n}\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,UAAU,CAAC;IACpB,OAAO,KACF,SAAS,CAAC,OACV,OAAO,CAAC,oBAAoB,IAC5B,WAAW,GACX,IAAI,GACJ,OAAO,CAAC,QAAQ,KAChB,OAAO,CAAC,YAAY;AAC7B"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/lib/ImagesDB.jsx"],"sourcesContent":["import { supabase } from './supabaseClient';\r\nimport { slugify } from '@/lib/utils';\r\n\r\nexport async function uploadFn(filesData, category) {\r\n    const uploadedFiles = [];\r\n\r\n    for (const item of filesData) {\r\n        const { file, width, height } = item;\r\n        const filePath = `${category}/${file.name}`;\r\n        const { data, error } = await supabase.storage\r\n            .from(\"ilustras\")\r\n            .upload(filePath, file);\r\n        if (error) {\r\n            console.error(\"Erro ao fazer upload:\", error);\r\n            continue;\r\n        }\r\n        const url = `https://utyaegtlratnhymumqjm.supabase.co/storage/v1/object/public/ilustras/${filePath}`;\r\n        const { error: dbError } = await supabase.from(\"imagens\").insert([\r\n            { nome: file.name, url, categoria: category, width, height }\r\n        ]);\r\n        if (dbError) {\r\n            console.error(\"Erro ao salvar no banco:\", dbError);\r\n            continue;\r\n        }\r\n        uploadedFiles.push({ url, name: file.name });\r\n    }\r\n    return uploadedFiles;\r\n}\r\n\r\n\r\nexport async function getImagesByCategory(slug) {\r\n    // 1. Fetch all distinct categories to find the real name\r\n    const { data: categoriesData, error: catError } = await supabase\r\n        .from(\"imagens\")\r\n        .select(\"categoria\");\r\n\r\n    if (catError) {\r\n        console.error(\"Erro ao buscar categorias:\", catError);\r\n        return [];\r\n    }\r\n\r\n    const uniqueCategories = [...new Set(categoriesData.map(item => item.categoria))];\r\n\r\n    // 2. Find the category that matches the slug\r\n    // Try exact match first (if slug is already the category name)\r\n    let realCategory = uniqueCategories.find(c => c === slug);\r\n\r\n    if (!realCategory) {\r\n        // Try matching slugified version\r\n        realCategory = uniqueCategories.find(c => slugify(c) === slug);\r\n    }\r\n\r\n    // Fallback: try replacing hyphens with spaces if still not found\r\n    if (!realCategory) {\r\n        const potentialName = slug.replace(/-/g, ' ');\r\n        // Case-insensitive check against potential name\r\n        realCategory = uniqueCategories.find(c => c.toLowerCase() === potentialName.toLowerCase());\r\n\r\n        // If still not found, use potentialName as last resort for the query\r\n        if (!realCategory) realCategory = potentialName;\r\n    }\r\n\r\n    console.log(`Slug: ${slug} -> Real Category: ${realCategory}`);\r\n\r\n    const { data, error } = await supabase\r\n        .from(\"imagens\")\r\n        .select(\"*\")\r\n        .eq(\"categoria\", realCategory)\r\n        .order('created_at', { ascending: false }); // Use eq with the real name\r\n\r\n    if (error) {\r\n        console.error(\"Erro ao buscar imagens:\", error);\r\n        return [];\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport async function getImageById(id) {\r\n    const { data, error } = await supabase\r\n        .from(\"imagens\")\r\n        .select(\"*\")\r\n        .eq(\"id\", id)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error(\"Erro ao buscar imagem por id:\", error);\r\n        return null;\r\n    }\r\n\r\n    return data;\r\n}"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,eAAe,SAAS,SAAS,EAAE,QAAQ;IAC9C,MAAM,gBAAgB,EAAE;IAExB,KAAK,MAAM,QAAQ,UAAW;QAC1B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG;QAChC,MAAM,WAAW,GAAG,SAAS,CAAC,EAAE,KAAK,IAAI,EAAE;QAC3C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,kIAAQ,CAAC,OAAO,CACzC,IAAI,CAAC,YACL,MAAM,CAAC,UAAU;QACtB,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,yBAAyB;YACvC;QACJ;QACA,MAAM,MAAM,CAAC,2EAA2E,EAAE,UAAU;QACpG,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,kIAAQ,CAAC,IAAI,CAAC,WAAW,MAAM,CAAC;YAC7D;gBAAE,MAAM,KAAK,IAAI;gBAAE;gBAAK,WAAW;gBAAU;gBAAO;YAAO;SAC9D;QACD,IAAI,SAAS;YACT,QAAQ,KAAK,CAAC,4BAA4B;YAC1C;QACJ;QACA,cAAc,IAAI,CAAC;YAAE;YAAK,MAAM,KAAK,IAAI;QAAC;IAC9C;IACA,OAAO;AACX;AAGO,eAAe,oBAAoB,IAAI;IAC1C,yDAAyD;IACzD,MAAM,EAAE,MAAM,cAAc,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,kIAAQ,CAC3D,IAAI,CAAC,WACL,MAAM,CAAC;IAEZ,IAAI,UAAU;QACV,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,EAAE;IACb;IAEA,MAAM,mBAAmB;WAAI,IAAI,IAAI,eAAe,GAAG,CAAC,CAAA,OAAQ,KAAK,SAAS;KAAG;IAEjF,6CAA6C;IAC7C,+DAA+D;IAC/D,IAAI,eAAe,iBAAiB,IAAI,CAAC,CAAA,IAAK,MAAM;IAEpD,IAAI,CAAC,cAAc;QACf,iCAAiC;QACjC,eAAe,iBAAiB,IAAI,CAAC,CAAA,IAAK,IAAA,uHAAO,EAAC,OAAO;IAC7D;IAEA,iEAAiE;IACjE,IAAI,CAAC,cAAc;QACf,MAAM,gBAAgB,KAAK,OAAO,CAAC,MAAM;QACzC,gDAAgD;QAChD,eAAe,iBAAiB,IAAI,CAAC,CAAA,IAAK,EAAE,WAAW,OAAO,cAAc,WAAW;QAEvF,qEAAqE;QACrE,IAAI,CAAC,cAAc,eAAe;IACtC;IAEA,QAAQ,GAAG,CAAC,CAAC,MAAM,EAAE,KAAK,mBAAmB,EAAE,cAAc;IAE7D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,kIAAQ,CACjC,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,aAAa,cAChB,KAAK,CAAC,cAAc;QAAE,WAAW;IAAM,IAAI,4BAA4B;IAE5E,IAAI,OAAO;QACP,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,EAAE;IACb;IAEA,OAAO;AACX;AAEO,eAAe,aAAa,EAAE;IACjC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,kIAAQ,CACjC,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,IACT,MAAM;IAEX,IAAI,OAAO;QACP,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO;IACX;IAEA,OAAO;AACX"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/app/%5Bcategory%5D/page.jsx"],"sourcesContent":["import Mansonry from '@/components/mansonry';\r\nimport { getImagesByCategory } from '@/lib/ImagesDB';\r\n\r\nexport default async function CategoryPage({ params }) {\r\n    const { category } = await params;\r\n    const initialImages = await getImagesByCategory(category);\r\n    return <Mansonry category={category} initialImages={initialImages} />;\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,eAAe,aAAa,EAAE,MAAM,EAAE;IACjD,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM;IAC3B,MAAM,gBAAgB,MAAM,IAAA,uIAAmB,EAAC;IAChD,qBAAO,8OAAC,kIAAQ;QAAC,UAAU;QAAU,eAAe;;;;;;AACxD"}}]
}