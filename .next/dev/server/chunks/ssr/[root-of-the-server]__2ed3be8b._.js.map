{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/contexto/supabaseClient.jsx"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\nconst supabaseUrl = 'https://utyaegtlratnhymumqjm.supabase.co'\r\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV0eWFlZ3RscmF0bmh5bXVtcWptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMzNTU5MDUsImV4cCI6MjA1ODkzMTkwNX0.B2-GTy9rJPgGTmDeB70CwfzbbTTdocp-1QzRaMNDntQ'\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);\r\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,cAAc;AACpB,MAAM,cAAc;AACb,MAAM,WAAW,IAAA,uMAAY,EAAC,aAAa"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/context/AppContext.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect } from 'react';\r\nimport { supabase } from '../contexto/supabaseClient';\r\n\r\nconst AppContext = createContext();\r\n\r\nexport function AppProvider({ children }) {\r\n    // Initialize with 'misc' to avoid hydration mismatch, or handle it in useEffect\r\n    const [categoria, setCategoria] = useState('misc');\r\n    const [upWindow, setUpWindow] = useState(false);\r\n    const [nova, setNova] = useState(false);\r\n    const [categories, setCategories] = useState([]);\r\n\r\n    useEffect(() => {\r\n        // Client-side only initialization\r\n        const storedCategory = localStorage.getItem('categoria');\r\n        if (storedCategory) {\r\n            setCategoria(storedCategory);\r\n        }\r\n    }, []);\r\n\r\n    const slugify = (text) => {\r\n        return text\r\n            .normalize(\"NFD\")\r\n            .replace(/[\\u0300-\\u036f]/g, \"\")\r\n            .toLowerCase()\r\n            .trim()\r\n            .replace(/\\s+/g, \"-\")\r\n            .replace(/[^\\w-]+/g, \"\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetchCategories = async () => {\r\n            const { data, error } = await supabase\r\n                .from('imagens')\r\n                .select('categoria');\r\n\r\n            if (error) {\r\n                console.error('Error fetching categories:', error);\r\n                return;\r\n            }\r\n            const uniqueCategories = [...new Set(data.map(item => item.categoria))];\r\n            setCategories(uniqueCategories);\r\n        };\r\n\r\n        fetchCategories();\r\n    }, []);\r\n\r\n    return (\r\n        <AppContext.Provider value={{\r\n            categoria,\r\n            setCategoria,\r\n            upWindow,\r\n            setUpWindow,\r\n            nova,\r\n            setNova,\r\n            categories,\r\n            slugify\r\n        }}>\r\n            {children}\r\n        </AppContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAppContext() {\r\n    return useContext(AppContext);\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,2BAAa,IAAA,sNAAa;AAEzB,SAAS,YAAY,EAAE,QAAQ,EAAE;IACpC,gFAAgF;IAChF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAE/C,IAAA,kNAAS,EAAC;QACN,kCAAkC;QAClC,MAAM,iBAAiB,aAAa,OAAO,CAAC;QAC5C,IAAI,gBAAgB;YAChB,aAAa;QACjB;IACJ,GAAG,EAAE;IAEL,MAAM,UAAU,CAAC;QACb,OAAO,KACF,SAAS,CAAC,OACV,OAAO,CAAC,oBAAoB,IAC5B,WAAW,GACX,IAAI,GACJ,OAAO,CAAC,QAAQ,KAChB,OAAO,CAAC,YAAY;IAC7B;IAEA,IAAA,kNAAS,EAAC;QACN,MAAM,kBAAkB;YACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACjC,IAAI,CAAC,WACL,MAAM,CAAC;YAEZ,IAAI,OAAO;gBACP,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C;YACJ;YACA,MAAM,mBAAmB;mBAAI,IAAI,IAAI,KAAK,GAAG,CAAC,CAAA,OAAQ,KAAK,SAAS;aAAG;YACvE,cAAc;QAClB;QAEA;IACJ,GAAG,EAAE;IAEL,qBACI,8OAAC,WAAW,QAAQ;QAAC,OAAO;YACxB;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;kBACK;;;;;;AAGb;AAEO,SAAS;IACZ,OAAO,IAAA,mNAAU,EAAC;AACtB"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/contexto/Auth.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\r\nimport { supabase } from './supabaseClient';\r\n\r\nexport const AuthContext = createContext({});\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState();\r\n    const [logado, setLogado] = useState(() => {\r\n        const savedLogado = localStorage.getItem('logado');\r\n        return savedLogado ? JSON.parse(savedLogado) : '';\r\n    });\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        const bancoDados = localStorage.getItem('bancoDados');\r\n\r\n        if (token && bancoDados) {\r\n            const sucesso = JSON.parse(bancoDados)?.filter(\r\n                (user) => user.usuario === JSON.parse(token).usuario\r\n            );\r\n            if (sucesso) setUser(sucesso[0]);\r\n        }\r\n    }, []);\r\n\r\n    const login = async (usuario, password) => {\r\n        const { data, error } = await supabase\r\n            .from('settings')\r\n            .select('usuario, password')\r\n            .eq('usuario', usuario)\r\n            .single();\r\n\r\n        if (error) {\r\n            console.error(\"Erro ao buscar usuário:\", error);\r\n            return 'Erro ao buscar o usuário';\r\n        }\r\n\r\n        if (data) {\r\n            if (data.password === password) {\r\n                const token = Math.random().toString(36).substring(2);\r\n                localStorage.setItem('token', JSON.stringify({ usuario, token }));\r\n                setUser({ usuario, password });\r\n                setLogado('1');\r\n                localStorage.setItem('logado', JSON.stringify(1));\r\n                return;\r\n            } else {\r\n                return 'Usuário ou password errados';\r\n            }\r\n        } else {\r\n            return 'Usuário não encontrado';\r\n        }\r\n    };\r\n\r\n    const sair = () => {\r\n        setLogado('');\r\n        setUser(null);\r\n        localStorage.removeItem('logado');\r\n        localStorage.removeItem('token');\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, logged: !!user, login, sair, logado }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAEO,MAAM,4BAAc,IAAA,sNAAa,EAAC,CAAC;AAEnC,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ;IAChC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;QACjC,MAAM,cAAc,aAAa,OAAO,CAAC;QACzC,OAAO,cAAc,KAAK,KAAK,CAAC,eAAe;IACnD;IAEA,IAAA,kNAAS,EAAC;QACN,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,MAAM,aAAa,aAAa,OAAO,CAAC;QAExC,IAAI,SAAS,YAAY;YACrB,MAAM,UAAU,KAAK,KAAK,CAAC,aAAa,OACpC,CAAC,OAAS,KAAK,OAAO,KAAK,KAAK,KAAK,CAAC,OAAO,OAAO;YAExD,IAAI,SAAS,QAAQ,OAAO,CAAC,EAAE;QACnC;IACJ,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,SAAS;QAC1B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACjC,IAAI,CAAC,YACL,MAAM,CAAC,qBACP,EAAE,CAAC,WAAW,SACd,MAAM;QAEX,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO;QACX;QAEA,IAAI,MAAM;YACN,IAAI,KAAK,QAAQ,KAAK,UAAU;gBAC5B,MAAM,QAAQ,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;gBACnD,aAAa,OAAO,CAAC,SAAS,KAAK,SAAS,CAAC;oBAAE;oBAAS;gBAAM;gBAC9D,QAAQ;oBAAE;oBAAS;gBAAS;gBAC5B,UAAU;gBACV,aAAa,OAAO,CAAC,UAAU,KAAK,SAAS,CAAC;gBAC9C;YACJ,OAAO;gBACH,OAAO;YACX;QACJ,OAAO;YACH,OAAO;QACX;IACJ;IAEA,MAAM,OAAO;QACT,UAAU;QACV,QAAQ;QACR,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IAC5B;IAEA,qBACI,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM,QAAQ,CAAC,CAAC;YAAM;YAAO;YAAM;QAAO;kBACpE;;;;;;AAGb"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/hooks/useAuth.jsx"],"sourcesContent":["import { useContext } from \"react\";\r\nimport { AuthContext } from \"../contexto/Auth\";\r\n\r\nexport default function useAuth(){\r\n    return useContext(AuthContext)\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEe,SAAS;IACpB,OAAO,IAAA,mNAAU,EAAC,uIAAW;AACjC"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport useAuth from './hooks/useAuth.jsx'\r\n\r\nexport default function Logar() {\r\n    const { login } = useAuth()\r\n\r\n    const [usuario, setUsuario] = useState()\r\n    const [senha, setSenha] = useState()\r\n    const [erro, setErro] = useState()\r\n\r\n    const entrar = async () =>{\r\n        if(!usuario | !senha){\r\n            setErro('Insira as credenciais')\r\n            return\r\n        }\r\n        const res = await login(usuario, senha)\r\n        if(res){\r\n            setErro(res)\r\n            return\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"absolute mx-auto lpt:top-0 top-12 right-0 px-5 login z-0\">\r\n            <div className='relative flex gap-1 backdrop-blur-md py-2 px-3 rounded-xl'>\r\n                <input type=\"text\" placeholder=\"usuario\" className=\"px-2 py-1 rounded-md w-[120px] bg-gray-100 text-gray-800\" onChange={(e) => [setUsuario(e.target.value), setErro('')]}/>\r\n                <input type=\"password\" placeholder=\"senha\" className=\"px-2 py-1 rounded-md w-[120px] bg-gray-100 text-gray-800\" onChange={(e) => [setSenha(e.target.value), setErro('')]}/>\r\n\r\n                <input type=\"submit\" value=\"ir\" onClick={entrar}\r\n                    className=\"bg-gray-600 text-white py-1 rounded-md border-2 border-gray-600 border-solid duration-200 w-[40px] block\r\n                    hover:boder-gray-600 hover:bg-transparent hover:text-gray-600 cursor-pointer\"/>\r\n            </div>\r\n            <small className=\"text-red-500 w-auto\">{erro}</small>\r\n        </div>\r\n    )\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,mIAAO;IAEzB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ;IACtC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ;IAClC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ;IAEhC,MAAM,SAAS;QACX,IAAG,CAAC,UAAU,CAAC,OAAM;YACjB,QAAQ;YACR;QACJ;QACA,MAAM,MAAM,MAAM,MAAM,SAAS;QACjC,IAAG,KAAI;YACH,QAAQ;YACR;QACJ;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAM,MAAK;wBAAO,aAAY;wBAAU,WAAU;wBAA2D,UAAU,CAAC,IAAM;gCAAC,WAAW,EAAE,MAAM,CAAC,KAAK;gCAAG,QAAQ;6BAAI;;;;;;kCACxK,8OAAC;wBAAM,MAAK;wBAAW,aAAY;wBAAQ,WAAU;wBAA2D,UAAU,CAAC,IAAM;gCAAC,SAAS,EAAE,MAAM,CAAC,KAAK;gCAAG,QAAQ;6BAAI;;;;;;kCAExK,8OAAC;wBAAM,MAAK;wBAAS,OAAM;wBAAK,SAAS;wBACrC,WAAU;;;;;;;;;;;;0BAGlB,8OAAC;gBAAM,WAAU;0BAAuB;;;;;;;;;;;;AAGpD"}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/contexto/ImagesDB.jsx"],"sourcesContent":["import { supabase } from './supabaseClient';\r\n\r\nexport async function uploadFn(files, category) {\r\n    const uploadedFiles = [];\r\n\r\n    for (const file of files) {\r\n        const filePath = `${category}/${file.name}`;\r\n        const { data, error } = await supabase.storage\r\n            .from(\"ilustras\")\r\n            .upload(filePath, file);\r\n        if (error) {\r\n            console.error(\"Erro ao fazer upload:\", error);\r\n            continue;\r\n        }\r\n        const url = `https://utyaegtlratnhymumqjm.supabase.co/storage/v1/object/public/ilustras/${filePath}`;\r\n        const { error: dbError } = await supabase.from(\"imagens\").insert([\r\n            { nome: file.name, url, categoria: category }\r\n        ]);\r\n        if (dbError) {\r\n            console.error(\"Erro ao salvar no banco:\", dbError);\r\n            continue;\r\n        }\r\n        uploadedFiles.push({ url, name: file.name });\r\n    }\r\n    return uploadedFiles;\r\n}\r\n\r\n\r\nexport async function getImagesByCategory(slug) {\r\n    // Helper to slugify (must match AppContext logic)\r\n    const slugify = (text) => {\r\n        return text\r\n            .normalize(\"NFD\")\r\n            .replace(/[\\u0300-\\u036f]/g, \"\")\r\n            .toLowerCase()\r\n            .trim()\r\n            .replace(/\\s+/g, \"-\")\r\n            .replace(/[^\\w-]+/g, \"\");\r\n    }\r\n\r\n    // 1. Fetch all distinct categories to find the real name\r\n    const { data: categoriesData, error: catError } = await supabase\r\n        .from(\"imagens\")\r\n        .select(\"categoria\");\r\n\r\n    if (catError) {\r\n        console.error(\"Erro ao buscar categorias:\", catError);\r\n        return [];\r\n    }\r\n\r\n    const uniqueCategories = [...new Set(categoriesData.map(item => item.categoria))];\r\n\r\n    // 2. Find the category that matches the slug\r\n    // Try exact match first (if slug is already the category name)\r\n    let realCategory = uniqueCategories.find(c => c === slug);\r\n\r\n    if (!realCategory) {\r\n        // Try matching slugified version\r\n        realCategory = uniqueCategories.find(c => slugify(c) === slug);\r\n    }\r\n\r\n    // Fallback: try replacing hyphens with spaces if still not found\r\n    if (!realCategory) {\r\n        const potentialName = slug.replace(/-/g, ' ');\r\n        // Case-insensitive check against potential name\r\n        realCategory = uniqueCategories.find(c => c.toLowerCase() === potentialName.toLowerCase());\r\n\r\n        // If still not found, use potentialName as last resort for the query\r\n        if (!realCategory) realCategory = potentialName;\r\n    }\r\n\r\n    console.log(`Slug: ${slug} -> Real Category: ${realCategory}`);\r\n\r\n    const { data, error } = await supabase\r\n        .from(\"imagens\")\r\n        .select(\"*\")\r\n        .eq(\"categoria\", realCategory); // Use eq with the real name\r\n\r\n    if (error) {\r\n        console.error(\"Erro ao buscar imagens:\", error);\r\n        return [];\r\n    }\r\n\r\n    return data;\r\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEO,eAAe,SAAS,KAAK,EAAE,QAAQ;IAC1C,MAAM,gBAAgB,EAAE;IAExB,KAAK,MAAM,QAAQ,MAAO;QACtB,MAAM,WAAW,GAAG,SAAS,CAAC,EAAE,KAAK,IAAI,EAAE;QAC3C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CAAC,OAAO,CACzC,IAAI,CAAC,YACL,MAAM,CAAC,UAAU;QACtB,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,yBAAyB;YACvC;QACJ;QACA,MAAM,MAAM,CAAC,2EAA2E,EAAE,UAAU;QACpG,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,8IAAQ,CAAC,IAAI,CAAC,WAAW,MAAM,CAAC;YAC7D;gBAAE,MAAM,KAAK,IAAI;gBAAE;gBAAK,WAAW;YAAS;SAC/C;QACD,IAAI,SAAS;YACT,QAAQ,KAAK,CAAC,4BAA4B;YAC1C;QACJ;QACA,cAAc,IAAI,CAAC;YAAE;YAAK,MAAM,KAAK,IAAI;QAAC;IAC9C;IACA,OAAO;AACX;AAGO,eAAe,oBAAoB,IAAI;IAC1C,kDAAkD;IAClD,MAAM,UAAU,CAAC;QACb,OAAO,KACF,SAAS,CAAC,OACV,OAAO,CAAC,oBAAoB,IAC5B,WAAW,GACX,IAAI,GACJ,OAAO,CAAC,QAAQ,KAChB,OAAO,CAAC,YAAY;IAC7B;IAEA,yDAAyD;IACzD,MAAM,EAAE,MAAM,cAAc,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,8IAAQ,CAC3D,IAAI,CAAC,WACL,MAAM,CAAC;IAEZ,IAAI,UAAU;QACV,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,EAAE;IACb;IAEA,MAAM,mBAAmB;WAAI,IAAI,IAAI,eAAe,GAAG,CAAC,CAAA,OAAQ,KAAK,SAAS;KAAG;IAEjF,6CAA6C;IAC7C,+DAA+D;IAC/D,IAAI,eAAe,iBAAiB,IAAI,CAAC,CAAA,IAAK,MAAM;IAEpD,IAAI,CAAC,cAAc;QACf,iCAAiC;QACjC,eAAe,iBAAiB,IAAI,CAAC,CAAA,IAAK,QAAQ,OAAO;IAC7D;IAEA,iEAAiE;IACjE,IAAI,CAAC,cAAc;QACf,MAAM,gBAAgB,KAAK,OAAO,CAAC,MAAM;QACzC,gDAAgD;QAChD,eAAe,iBAAiB,IAAI,CAAC,CAAA,IAAK,EAAE,WAAW,OAAO,cAAc,WAAW;QAEvF,qEAAqE;QACrE,IAAI,CAAC,cAAc,eAAe;IACtC;IAEA,QAAQ,GAAG,CAAC,CAAC,MAAM,EAAE,KAAK,mBAAmB,EAAE,cAAc;IAE7D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8IAAQ,CACjC,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,aAAa,eAAe,4BAA4B;IAEhE,IAAI,OAAO;QACP,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,EAAE;IACb;IAEA,OAAO;AACX"}},
    {"offset": {"line": 392, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/components/SpinIcon.jsx"],"sourcesContent":["export default function SpinIcon(){\r\n    return(\r\n        <svg width=\"20px\" height=\"20px\" viewBox=\"0 0 16 16\" fill=\"none\">\r\n            <g fill=\"#000000\" fillRule=\"evenodd\" clipRule=\"evenodd\">\r\n                <path d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z\" opacity=\".2\"/>\r\n                <path d=\"M7.25.75A.75.75 0 018 0a8 8 0 018 8 .75.75 0 01-1.5 0A6.5 6.5 0 008 1.5a.75.75 0 01-.75-.75z\"/>\r\n            </g>\r\n        </svg>\r\n    )\r\n}"],"names":[],"mappings":";;;;;;AAAe,SAAS;IACpB,qBACI,8OAAC;QAAI,OAAM;QAAO,QAAO;QAAO,SAAQ;QAAY,MAAK;kBACrD,cAAA,8OAAC;YAAE,MAAK;YAAU,UAAS;YAAU,UAAS;;8BAC1C,8OAAC;oBAAK,GAAE;oBAA0E,SAAQ;;;;;;8BAC1F,8OAAC;oBAAK,GAAE;;;;;;;;;;;;;;;;;AAIxB"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/components/UploadImage.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { uploadFn } from \"../contexto/ImagesDB\";\r\nimport SpinIcon from \"./SpinIcon\";\r\nimport { supabase } from '../contexto/supabaseClient';\r\nimport Compressor from \"compressorjs\";\r\n\r\nfunction UploadForm({ setUpWindow, nova }) {\r\n  const [file, setFile] = useState(null);\r\n  const [category, setCategory] = useState(\"\");\r\n  const [uploading, setUploading] = useState(0);\r\n  const [hasImage, sethasImage] = useState(false)\r\n  const [preview, setPreview] = useState('')\r\n\r\n  const handleFileChange = (event) => {\r\n    const files = event.target.files;\r\n    setFile(files);\r\n    if(event.target.files && event.target.files[0]){\r\n        const arquivo = new FileReader()\r\n        arquivo.onload = fileLoaded\r\n        arquivo.readAsDataURL(event.target.files[0])\r\n    }\r\n    sethasImage(true)\r\n  };\r\n\r\n  const fileLoaded = event => setPreview(event.target.result)\r\n\r\n  const handleCategoryChange = (event) => {\r\n    setCategory(event.target.value);\r\n  };\r\n\r\nconst handleUpload = async () => {\r\n  const categoriaAtual = nova ? localStorage.getItem('categoria') : category;\r\n\r\n  if (!file?.[0] || !categoriaAtual) {\r\n    alert(\"Por favor, selecione um arquivo e uma categoria.\");\r\n    return;\r\n  }\r\n\r\n  setUploading(1);\r\n\r\n  if (nova) {\r\n    const urlEditar = localStorage.getItem('urlEditar');\r\n    const filePathOld = urlEditar.split('/ilustras/')[1];\r\n\r\n    const ext = \"avif\"; \r\n    const timestamp = Date.now();\r\n    const novoFilePath = `${categoriaAtual}/${timestamp}.${ext}`;\r\n\r\n    new Compressor(file[0], {\r\n      quality: 0.7,\r\n      mimeType: \"image/webp\",\r\n      convertSize: 1, \r\n      success: async (compressed) => {\r\n        const { data: uploadData, error: uploadError } = await supabase.storage\r\n          .from(\"ilustras\")\r\n          .upload(novoFilePath, compressed, {\r\n            cacheControl: \"3600\",\r\n            upsert: true,\r\n          });\r\n\r\n        if (uploadError) {\r\n          console.error(\"Erro ao fazer upload da nova imagem:\", uploadError);\r\n          setUploading(0);\r\n          return;\r\n        }\r\n\r\n        localStorage.removeItem(`imagens-${categoriaAtual}`);\r\n        const novaUrl = `https://utyaegtlratnhymumqjm.supabase.co/storage/v1/object/public/ilustras/${novoFilePath}`;\r\n\r\n        const { error: dbError } = await supabase\r\n          .from('imagens')\r\n          .update({ url: novaUrl })\r\n          .eq('url', urlEditar);\r\n\r\n        if (dbError) {\r\n          console.error(\"Erro ao atualizar URL no banco:\", dbError);\r\n          setUploading(0);\r\n          return;\r\n        }\r\n\r\n        console.log(\"URL atualizada com sucesso!\");\r\n        setTimeout(() => {\r\n          setUploading(2);\r\n        }, 1500);\r\n      },\r\n      error(err) {\r\n        console.error(\"Erro ao comprimir:\", err.message);\r\n        setUploading(0);\r\n      },\r\n    });\r\n\r\n  } else {\r\n    if (file.length > 0) {\r\n      const compressedFiles = await Promise.all(\r\n        [...file].map(f => \r\n          new Promise((resolve, reject) => {\r\n            new Compressor(f, {\r\n              quality: 0.7,\r\n              mimeType: \"image/webp\",\r\n              convertSize: 1,\r\n              success: resolve,\r\n              error: reject,\r\n            });\r\n          })\r\n        )\r\n      );\r\n\r\n      const result = await uploadFn(compressedFiles, categoriaAtual);\r\n      console.log(\"Arquivos enviados com sucesso:\", result);\r\n      setTimeout(() => {\r\n        setUploading(2);\r\n      }, 1500);\r\n    }\r\n  }\r\n};\r\n\r\n  return (\r\n        <div className=\"flex flex-col add items-center justify-center right-5 fixed top-0 left-0 bg-[#000000cc] w-full h-dvh backdrop-blur-md z-[999]\">\r\n            <button className='text-white z-30' onClick={() =>{uploading ? window.location.reload() : setUpWindow(false) } } >X</button>\r\n            <div className='flex gap-5'>\r\n                {!hasImage && \r\n                    <input type=\"file\" accept=\"/image/*\" multiple onChange={handleFileChange} className=\"p-28 bg-[#ffffff22] border-4 border-dashed border-gray-500 rounded-lg mt-2 [&::file-selector-button]:opacity-0  max-w-[520px] w-full text-transparent \r\n                    before:content-['DRAG_&_DROP'] before:text-white before:flex before:justify-center\" />\r\n                }\r\n                {hasImage && preview &&  \r\n                  <div className='flex flex-col'>\r\n                      <img src={preview} className='block w-96 h-96 object-contain'/>\r\n                      <button className='text-center text-gray-200 block py-3' \r\n                              onClick={() => sethasImage(false)}>\r\n                                escolher outra\r\n                      </button>\r\n                  </div>\r\n                }\r\n            </div>\r\n\r\n            <div className=\"p-4 rounded-md shadow-md w-80\">\r\n                <input type=\"text\" style={{display:nova ? 'none':'flex' }} \r\n                       placeholder={'D I G I T E  A  C A T E G O R I A'} required onChange={handleCategoryChange}\r\n                       className='bg-white/10 border py-2 px-5 max-w-[520px] w-full outline-none mx-3 text-gray-200  text-center'\r\n                  />\r\n\r\n                <br /><br />\r\n                <button className='text-gray-200 duration-200' onClick={handleUpload} disabled={uploading}>\r\n\r\n                  {uploading == 0 && \"Enviar\"}\r\n                  {uploading == 1 && <span className={`animate-spin flex items-center duration-200 transition-all invert`}><SpinIcon/></span>}\r\n                  {uploading == 2 && \"Upload Completo!\"}\r\n                </button>\r\n            </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UploadForm;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 692, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/Nav.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useAppContext } from './context/AppContext';\r\nimport './Nav.css';\r\nimport useAuth from \"./hooks/useAuth.jsx\";\r\nimport Logar from \"./login.jsx\";\r\nimport UploadForm from \"./components/UploadImage.jsx\";\r\nimport { useRouter } from 'next/navigation';\r\nimport { flushSync } from 'react-dom';\r\n\r\nexport default function Nav() {\r\n  const { setCategoria, upWindow, setUpWindow, nova, setNova, categories, slugify } = useAppContext();\r\n  const { logado, sair } = useAuth();\r\n  const [logar, setLogar] = useState(false);\r\n  // ativo state might be redundant if we use categoria from context, but let's keep it for local UI state if needed\r\n  // or sync it with context.\r\n  const { categoria } = useAppContext();\r\n  const [ativo, setAtivo] = useState(categoria);\r\n  const navigate = useRouter();\r\n\r\n  useEffect(() => {\r\n    setAtivo(categoria);\r\n  }, [categoria]);\r\n\r\n  const handleCategoryChange = (newCategory) => {\r\n    const targetPath = `/${slugify(newCategory)}`;\r\n    setAtivo(newCategory);\r\n\r\n    // View Transition API\r\n    if (document.startViewTransition) {\r\n      document.startViewTransition(() => {\r\n        flushSync(() => {\r\n          setCategoria(newCategory);\r\n          setAtivo(newCategory);\r\n          localStorage.setItem('categoria', slugify(newCategory));\r\n          navigate.push(targetPath);\r\n        });\r\n      });\r\n    } else {\r\n      // Fallback\r\n      setCategoria(newCategory);\r\n      setAtivo(newCategory);\r\n      localStorage.setItem('categoria', slugify(newCategory));\r\n      navigate.push(targetPath);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {logado && upWindow && <UploadForm setUpWindow={setUpWindow} nova={nova} />}\r\n      {logado && (\r\n        <>\r\n          <span className='log fixed right-12 top-[14px] text-gray-600 hover:text-gray-950 cursor-pointer z-50 hidden sm:block' onClick={sair}>sair</span>\r\n          <button className='log fixed right-6 top-[8px] text-gray-600 hover:text-gray-950 cursor-pointer z-30 text-2xl hidden sm:block' onClick={() => { setUpWindow(true); setNova(false) }}> + </button>\r\n        </>\r\n      )}\r\n      {!logado && (\r\n        <div className='flex flex-row add items-center fixed top-0 right-8 z-50'>\r\n          <button className='log text-2xl cursor-pointer text-gray-700 z-50 relative top-2' onClick={() => setLogar(true)}> + </button>\r\n          {logar && (\r\n            <>\r\n              <button className='log text-2xl cursor-pointer text-gray-700 z-50 absolute lpt:top-[.45rem] md:-left-[21rem] top-[3.4rem] -left-1 backdrop-blur px-2' onClick={() => setLogar(false)}>x</button>\r\n              <Logar />\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <nav style={{ viewTransitionName: 'main-nav' }}>\r\n        <ul className=\"items-start md:items-center justify-center z-10 relative xl:w-fit w-[90svw] mx-auto [&_li.active]:text-white mt-3 ml-3 bg-[#0003] rounded-2xl\">\r\n          {categories.map((table, index) => (\r\n            <li key={index} className={`${table.toLowerCase() === ativo ? 'active' : ''} md:text-lg text-[.7rem] font-[400] text-white/90 py-1 sm:py-3 px-2 sm:px-5 hover:text-white hover:[text-shadow:0_0_10px_white] uppercase`}\r\n              onClick={() => handleCategoryChange(table.toLowerCase())}\r\n              style={{ viewTransitionName: table.toLowerCase() === ativo ? 'active-category' : '' }}>\r\n              {table}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </nav>\r\n    </>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAWe,SAAS;IACtB,MAAM,EAAE,YAAY,EAAE,QAAQ,EAAE,WAAW,EAAE,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,GAAG,IAAA,8IAAa;IACjG,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,mIAAO;IAChC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,kHAAkH;IAClH,2BAA2B;IAC3B,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,8IAAa;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,WAAW,IAAA,+IAAS;IAE1B,IAAA,kNAAS,EAAC;QACR,SAAS;IACX,GAAG;QAAC;KAAU;IAEd,MAAM,uBAAuB,CAAC;QAC5B,MAAM,aAAa,CAAC,CAAC,EAAE,QAAQ,cAAc;QAC7C,SAAS;QAET,sBAAsB;QACtB,IAAI,SAAS,mBAAmB,EAAE;YAChC,SAAS,mBAAmB,CAAC;gBAC3B,IAAA,yNAAS,EAAC;oBACR,aAAa;oBACb,SAAS;oBACT,aAAa,OAAO,CAAC,aAAa,QAAQ;oBAC1C,SAAS,IAAI,CAAC;gBAChB;YACF;QACF,OAAO;YACL,WAAW;YACX,aAAa;YACb,SAAS;YACT,aAAa,OAAO,CAAC,aAAa,QAAQ;YAC1C,SAAS,IAAI,CAAC;QAChB;IACF;IAEA,qBACE;;YACG,UAAU,0BAAY,8OAAC,4IAAU;gBAAC,aAAa;gBAAa,MAAM;;;;;;YAClE,wBACC;;kCACE,8OAAC;wBAAK,WAAU;wBAAsG,SAAS;kCAAM;;;;;;kCACrI,8OAAC;wBAAO,WAAU;wBAA6G,SAAS;4BAAQ,YAAY;4BAAO,QAAQ;wBAAO;kCAAG;;;;;;;;YAGxL,CAAC,wBACA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAU;wBAAgE,SAAS,IAAM,SAAS;kCAAO;;;;;;oBAChH,uBACC;;0CACE,8OAAC;gCAAO,WAAU;gCAAoI,SAAS,IAAM,SAAS;0CAAQ;;;;;;0CACtL,8OAAC,wHAAK;;;;;;;;;;;;;0BAMd,8OAAC;gBAAI,OAAO;oBAAE,oBAAoB;gBAAW;0BAC3C,cAAA,8OAAC;oBAAG,WAAU;8BACX,WAAW,GAAG,CAAC,CAAC,OAAO,sBACtB,8OAAC;4BAAe,WAAW,GAAG,MAAM,WAAW,OAAO,QAAQ,WAAW,GAAG,yIAAyI,CAAC;4BACpN,SAAS,IAAM,qBAAqB,MAAM,WAAW;4BACrD,OAAO;gCAAE,oBAAoB,MAAM,WAAW,OAAO,QAAQ,oBAAoB;4BAAG;sCACnF;2BAHM;;;;;;;;;;;;;;;;;AAUrB"}},
    {"offset": {"line": 855, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/components/SquircleMask.jsx"],"sourcesContent":["export default function SquircleMask({ smoothness = 0.02 }) {\r\n    return (\r\n        <svg width=\"0\" height=\"0\">\r\n                <clipPath id=\"squircle-mask\" clipPathUnits=\"objectBoundingBox\">\r\n                    <path d={`M 0.5 0 \r\n                              C ${smoothness} 0 0 ${smoothness} 0 0.5 \r\n                              C 0 ${1-smoothness} ${smoothness} 1 0.5 1 \r\n                              C ${1-smoothness} 1 1 ${1-smoothness} 1 0.5 \r\n                              C 1 ${smoothness} ${1-smoothness} 0 0.5 0 Z`} \r\n                    />\r\n                </clipPath>\r\n        </svg>\r\n    );\r\n}"],"names":[],"mappings":";;;;;;AAAe,SAAS,aAAa,EAAE,aAAa,IAAI,EAAE;IACtD,qBACI,8OAAC;QAAI,OAAM;QAAI,QAAO;kBACd,cAAA,8OAAC;YAAS,IAAG;YAAgB,eAAc;sBACvC,cAAA,8OAAC;gBAAK,GAAG,CAAC;gCACE,EAAE,WAAW,KAAK,EAAE,WAAW;kCAC7B,EAAE,IAAE,WAAW,CAAC,EAAE,WAAW;gCAC/B,EAAE,IAAE,WAAW,KAAK,EAAE,IAAE,WAAW;kCACjC,EAAE,WAAW,CAAC,EAAE,IAAE,WAAW,UAAU,CAAC;;;;;;;;;;;;;;;;AAK1E"}},
    {"offset": {"line": 894, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bruno/OneDrive/Documentos/GitHub/react-gallery/src/components/ClientLayout.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { AppProvider } from '../context/AppContext';\r\nimport Nav from '../Nav';\r\nimport SquircleMask from '../components/SquircleMask';\r\n\r\nexport default function ClientLayout({ children }) {\r\n    return (\r\n        <AppProvider>\r\n            <SquircleMask />\r\n            {/* Nav needs to be updated to use context internally */}\r\n            <Nav />\r\n            {children}\r\n        </AppProvider>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,aAAa,EAAE,QAAQ,EAAE;IAC7C,qBACI,8OAAC,4IAAW;;0BACR,8OAAC,6IAAY;;;;;0BAEb,8OAAC,sHAAG;;;;;YACH;;;;;;;AAGb"}}]
}