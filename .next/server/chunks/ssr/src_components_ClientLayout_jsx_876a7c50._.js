module.exports=[83556,a=>{"use strict";var b=a.i(87924),c=a.i(1695),d=a.i(72131),e=a.i(10096);function f(){let{login:a}=(0,e.default)(),[c,f]=(0,d.useState)(),[g,h]=(0,d.useState)(),[i,j]=(0,d.useState)(),k=async()=>{if(!c|!g)return void j("Insira as credenciais");let b=await a(c,g);if(b)return void j(b)};return(0,b.jsxs)("div",{className:"absolute mx-auto lpt:top-0 top-12 right-0 px-5 login z-0",children:[(0,b.jsxs)("div",{className:"relative flex gap-1 backdrop-blur-md py-2 px-3 rounded-xl",children:[(0,b.jsx)("input",{type:"text",placeholder:"usuario",className:"px-2 py-1 rounded-md w-[120px] bg-gray-100 text-gray-800",onChange:a=>[f(a.target.value),j("")]}),(0,b.jsx)("input",{type:"password",placeholder:"senha",className:"px-2 py-1 rounded-md w-[120px] bg-gray-100 text-gray-800",onChange:a=>[h(a.target.value),j("")]}),(0,b.jsx)("input",{type:"submit",value:"ir",onClick:k,className:"bg-gray-600 text-white py-1 rounded-md border-2 border-gray-600 border-solid duration-200 w-[40px] block   hover:boder-gray-600 hover:bg-transparent hover:text-gray-600 cursor-pointer"})]}),(0,b.jsx)("small",{className:"text-red-500 w-auto",children:i})]})}var g=a.i(83361);async function h(a,b){let c=[];for(let d of a){let a=`${b}/${d.name}`,{data:e,error:f}=await g.supabase.storage.from("ilustras").upload(a,d);if(f){console.error("Erro ao fazer upload:",f);continue}let h=`https://utyaegtlratnhymumqjm.supabase.co/storage/v1/object/public/ilustras/${a}`,{error:i}=await g.supabase.from("imagens").insert([{nome:d.name,url:h,categoria:b}]);if(i){console.error("Erro ao salvar no banco:",i);continue}c.push({url:h,name:d.name})}return c}function i(){return(0,b.jsx)("svg",{width:"20px",height:"20px",viewBox:"0 0 16 16",fill:"none",children:(0,b.jsxs)("g",{fill:"#000000",fillRule:"evenodd",clipRule:"evenodd",children:[(0,b.jsx)("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z",opacity:".2"}),(0,b.jsx)("path",{d:"M7.25.75A.75.75 0 018 0a8 8 0 018 8 .75.75 0 01-1.5 0A6.5 6.5 0 008 1.5a.75.75 0 01-.75-.75z"})]})})}function j(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function k(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?j(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=n(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):j(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function l(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,n(d.key),d)}}function m(){return(m=Object.assign.bind()).apply(this,arguments)}function n(a){var b=function(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:String(b)}a.i(42761);var o={},p={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},q={},r=function(a){return a>0&&a<1/0},s=Array.prototype.slice;function t(a){return Array.from?Array.from(a):s.call(a)}var u=/^image\/.+$/;function v(a){return u.test(a)}var w=String.fromCharCode,x=q.btoa;function y(a,b){for(var c=[],d=new Uint8Array(a);d.length>0;)c.push(w.apply(null,t(d.subarray(0,8192)))),d=d.subarray(8192);return"data:".concat(b,";base64,").concat(x(c.join("")))}var z=/\.\d*(?:0|9){12}\d*$/;function A(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return z.test(a)?Math.round(a*b)/b:a}function B(a){var b=a.aspectRatio,c=a.height,d=a.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",f=r(d),g=r(c);if(f&&g){var h=c*b;("contain"===e||"none"===e)&&h>d||"cover"===e&&h<d?c=d/b:d=c*b}else f?c=d/b:g&&(d=c*b);return{width:d,height:c}}var C=q.ArrayBuffer,D=q.FileReader,E=q.URL||q.webkitURL,F=/\.\w+$/,G=q.Compressor,H=function(){var a,b;function c(a,b){if(!(this instanceof c))throw TypeError("Cannot call a class as a function");this.file=a,this.exif=[],this.image=new Image,this.options=k(k({},p),b),this.aborted=!1,this.result=null,this.init()}return a=[{key:"init",value:function(){var a=this,b=this.file,c=this.options;if(!("undefined"!=typeof Blob&&(b instanceof Blob||"[object Blob]"===Object.prototype.toString.call(b))))return void this.fail(Error("The first argument must be a File or Blob object."));var d=b.type;if(!v(d))return void this.fail(Error("The first argument must be an image File or Blob object."));if(!E||!D)return void this.fail(Error("The current browser does not support image compression."));C||(c.checkOrientation=!1,c.retainExif=!1);var e="image/jpeg"===d,f=e&&c.checkOrientation,g=e&&c.retainExif;if(!E||f||g){var h=new D;this.reader=h,h.onload=function(c){var e=c.target.result,h={},i=1;f&&(i=function(a){var b=new DataView(a);try{if(255===b.getUint8(0)&&216===b.getUint8(1))for(var c=b.byteLength,d=2;d+1<c;){if(255===b.getUint8(d)&&225===b.getUint8(d+1)){k=d;break}d+=1}if(k){var e=k+4,f=k+10;if("Exif"===function(a,b,c){var d,e="";for(c+=b,d=b;d<c;d+=1)e+=w(a.getUint8(d));return e}(b,e,4)){var g=b.getUint16(f);if(((j=18761===g)||19789===g)&&42===b.getUint16(f+2,j)){var h=b.getUint32(f+4,j);h>=8&&(l=f+h)}}}if(l){var i,j,k,l,m,n,o=b.getUint16(l,j);for(n=0;n<o;n+=1)if(m=l+12*n+2,274===b.getUint16(m,j)){m+=8,i=b.getUint16(m,j),b.setUint16(m,1,j);break}}}catch(a){i=1}return i}(e))>1&&m(h,function(a){var b=0,c=1,d=1;switch(a){case 2:c=-1;break;case 3:b=-180;break;case 4:d=-1;break;case 5:b=90,d=-1;break;case 6:b=90;break;case 7:b=90,c=-1;break;case 8:b=-90}return{rotate:b,scaleX:c,scaleY:d}}(i)),g&&(a.exif=function(a){for(var b=t(new Uint8Array(a)),c=b.length,d=[],e=0;e+3<c;){var f=b[e],g=b[e+1];if(255===f&&218===g)break;if(255===f&&216===g)e+=2;else{var h=256*b[e+2]+b[e+3],i=e+h+2,j=b.slice(e,i);d.push(j),e=i}}return d.reduce(function(a,b){return 255===b[0]&&225===b[1]?a.concat(b):a},[])}(e)),f||g?!E||i>1?h.url=y(e,d):h.url=E.createObjectURL(b):h.url=e,a.load(h)},h.onabort=function(){a.fail(Error("Aborted to read the image with FileReader."))},h.onerror=function(){a.fail(Error("Failed to read the image with FileReader."))},h.onloadend=function(){a.reader=null},f||g?h.readAsArrayBuffer(b):h.readAsDataURL(b)}else this.load({url:E.createObjectURL(b)})}},{key:"load",value:function(a){var b=this,c=this.file,d=this.image;d.onload=function(){b.draw(k(k({},a),{},{naturalWidth:d.naturalWidth,naturalHeight:d.naturalHeight}))},d.onabort=function(){b.fail(Error("Aborted to load the image."))},d.onerror=function(){b.fail(Error("Failed to load the image."))},q.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(q.navigator.userAgent)&&(d.crossOrigin="anonymous"),d.alt=c.name,d.src=a.url}},{key:"draw",value:function(a){var b=this,c=a.naturalWidth,d=a.naturalHeight,e=a.rotate,f=void 0===e?0:e,g=a.scaleX,h=a.scaleY,i=this.file,j=this.image,k=this.options,l=document.createElement("canvas"),m=l.getContext("2d"),n=Math.abs(f)%180==90,p=("contain"===k.resize||"cover"===k.resize)&&r(k.width)&&r(k.height),q=Math.max(k.maxWidth,0)||1/0,s=Math.max(k.maxHeight,0)||1/0,u=Math.max(k.minWidth,0)||0,w=Math.max(k.minHeight,0)||0,x=c/d,z=k.width,C=k.height;if(n){var E=[s,q];q=E[0],s=E[1];var F=[w,u];u=F[0],w=F[1];var G=[C,z];z=G[0],C=G[1]}p&&(x=z/C);var H=B({aspectRatio:x,width:q,height:s},"contain");q=H.width,s=H.height;var I=B({aspectRatio:x,width:u,height:w},"cover");if(u=I.width,w=I.height,p){var J=B({aspectRatio:x,width:z,height:C},k.resize);z=J.width,C=J.height}else{var K=B({aspectRatio:x,width:z,height:C}),L=K.width;z=void 0===L?c:L;var M=K.height;C=void 0===M?d:M}z=Math.floor(A(Math.min(Math.max(z,u),q))),C=Math.floor(A(Math.min(Math.max(C,w),s)));var N=-z/2,O=-C/2,P=z,Q=C,R=[];if(p){var S=0,T=0,U=c,V=d,W=B({aspectRatio:x,width:c,height:d},{contain:"cover",cover:"contain"}[k.resize]);U=W.width,V=W.height,S=(c-U)/2,T=(d-V)/2,R.push(S,T,U,V)}if(R.push(N,O,P,Q),n){var X=[C,z];z=X[0],C=X[1]}l.width=z,l.height=C,v(k.mimeType)||(k.mimeType=i.type);var Y="transparent";i.size>k.convertSize&&k.convertTypes.indexOf(k.mimeType)>=0&&(k.mimeType="image/jpeg");var Z="image/jpeg"===k.mimeType;if((Z&&(Y="#fff"),m.fillStyle=Y,m.fillRect(0,0,z,C),k.beforeDraw&&k.beforeDraw.call(this,m,l),!this.aborted)&&(m.save(),m.translate(z/2,C/2),m.rotate(f*Math.PI/180),m.scale(void 0===g?1:g,void 0===h?1:h),m.drawImage.apply(m,[j].concat(R)),m.restore(),k.drew&&k.drew.call(this,m,l),!this.aborted)){var $=function(a){if(!b.aborted){var e=function(a){return b.done({naturalWidth:c,naturalHeight:d,result:a})};if(a&&Z&&k.retainExif&&b.exif&&b.exif.length>0){var f=function(a){return e(o(y(function(a,b){var c=t(new Uint8Array(a));if(255!==c[2]||224!==c[3])return a;var d=256*c[4]+c[5];return new Uint8Array([255,216].concat(b,c.slice(4+d)))}(a,b.exif),k.mimeType)))};if(a.arrayBuffer)a.arrayBuffer().then(f).catch(function(){b.fail(Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var g=new D;b.reader=g,g.onload=function(a){f(a.target.result)},g.onabort=function(){b.fail(Error("Aborted to read the compressed image with FileReader."))},g.onerror=function(){b.fail(Error("Failed to read the compressed image with FileReader."))},g.onloadend=function(){b.reader=null},g.readAsArrayBuffer(a)}}else e(a)}};l.toBlob?l.toBlob($,k.mimeType,k.quality):$(o(l.toDataURL(k.mimeType,k.quality)))}}},{key:"done",value:function(a){var b=a.naturalWidth,c=a.naturalHeight,d=a.result,e=this.file,f=this.image,g=this.options;if(E&&0===f.src.indexOf("blob:")&&E.revokeObjectURL(f.src),d)if(g.strict&&!g.retainExif&&d.size>e.size&&g.mimeType===e.type&&!(g.width>b||g.height>c||g.minWidth>b||g.minHeight>c||g.maxWidth<b||g.maxHeight<c))d=e;else{var h,i,j=new Date;d.lastModified=j.getTime(),d.lastModifiedDate=j,d.name=e.name,d.name&&d.type!==e.type&&(d.name=d.name.replace(F,("jpeg"===(i=v(h=d.type)?h.substr(6):"")&&(i="jpg"),".".concat(i))))}else d=e;this.result=d,g.success&&g.success.call(this,d)}},{key:"fail",value:function(a){var b=this.options;if(b.error)b.error.call(this,a);else throw a}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],b=[{key:"noConflict",value:function(){return window.Compressor=G,c}},{key:"setDefaults",value:function(a){m(p,a)}}],a&&l(c.prototype,a),b&&l(c,b),Object.defineProperty(c,"prototype",{writable:!1}),c}();let I=function({setUpWindow:a,nova:c}){let[e,f]=(0,d.useState)(null),[j,k]=(0,d.useState)(""),[l,m]=(0,d.useState)(0),[n,o]=(0,d.useState)(!1),[p,q]=(0,d.useState)(""),r=a=>q(a.target.result),s=async()=>{let a=c?localStorage.getItem("categoria"):j;if(!e?.[0]||!a)return void alert("Por favor, selecione um arquivo e uma categoria.");if(m(1),c){let b=localStorage.getItem("urlEditar");b.split("/ilustras/")[1];let c=Date.now(),d=`${a}/${c}.avif`;new H(e[0],{quality:.7,mimeType:"image/webp",convertSize:1,success:async c=>{let{data:e,error:f}=await g.supabase.storage.from("ilustras").upload(d,c,{cacheControl:"3600",upsert:!0});if(f){console.error("Erro ao fazer upload da nova imagem:",f),m(0);return}localStorage.removeItem(`imagens-${a}`);let h=`https://utyaegtlratnhymumqjm.supabase.co/storage/v1/object/public/ilustras/${d}`,{error:i}=await g.supabase.from("imagens").update({url:h}).eq("url",b);if(i){console.error("Erro ao atualizar URL no banco:",i),m(0);return}console.log("URL atualizada com sucesso!"),setTimeout(()=>{m(2)},1500)},error(a){console.error("Erro ao comprimir:",a.message),m(0)}})}else if(e.length>0){let b=await Promise.all([...e].map(a=>new Promise((b,c)=>{new H(a,{quality:.7,mimeType:"image/webp",convertSize:1,success:b,error:c})})));console.log("Arquivos enviados com sucesso:",await h(b,a)),setTimeout(()=>{m(2)},1500)}};return(0,b.jsxs)("div",{className:"flex flex-col add items-center justify-center right-5 fixed top-0 left-0 bg-[#000000cc] w-full h-dvh backdrop-blur-md z-[999]",children:[(0,b.jsx)("button",{className:"text-white z-30",onClick:()=>{l?window.location.reload():a(!1)},children:"X"}),(0,b.jsxs)("div",{className:"flex gap-5",children:[!n&&(0,b.jsx)("input",{type:"file",accept:"/image/*",multiple:!0,onChange:a=>{if(f(a.target.files),a.target.files&&a.target.files[0]){let b=new FileReader;b.onload=r,b.readAsDataURL(a.target.files[0])}o(!0)},className:"p-28 bg-[#ffffff22] border-4 border-dashed border-gray-500 rounded-lg mt-2 [&::file-selector-button]:opacity-0  max-w-[520px] w-full text-transparent    before:content-['DRAG_&_DROP'] before:text-white before:flex before:justify-center"}),n&&p&&(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("img",{src:p,className:"block w-96 h-96 object-contain"}),(0,b.jsx)("button",{className:"text-center text-gray-200 block py-3",onClick:()=>o(!1),children:"escolher outra"})]})]}),(0,b.jsxs)("div",{className:"p-4 rounded-md shadow-md w-80",children:[(0,b.jsx)("input",{type:"text",style:{display:c?"none":"flex"},placeholder:"D I G I T E  A  C A T E G O R I A",required:!0,onChange:a=>{k(a.target.value)},className:"bg-white/10 border py-2 px-5 max-w-[520px] w-full outline-none mx-3 text-gray-200  text-center"}),(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),(0,b.jsxs)("button",{className:"text-gray-200 duration-200",onClick:s,disabled:l,children:[0==l&&"Enviar",1==l&&(0,b.jsx)("span",{className:"animate-spin flex items-center duration-200 transition-all invert",children:(0,b.jsx)(i,{})}),2==l&&"Upload Completo!"]})]})]})};var J=a.i(38246),K=a.i(50944);function L(){let{upWindow:a,setUpWindow:g,nova:h,setNova:i,categories:j,slugify:k}=(0,c.useAppContext)(),{logado:l,sair:m}=(0,e.default)(),[n,o]=(0,d.useState)(!1),p=(0,K.useSelectedLayoutSegment)()||"misc";return(0,b.jsxs)(b.Fragment,{children:[l&&a&&(0,b.jsx)(I,{setUpWindow:g,nova:h}),l&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"log fixed right-12 top-[14px] text-gray-600 hover:text-gray-950 cursor-pointer z-50 hidden sm:block",onClick:m,children:"sair"}),(0,b.jsx)("button",{className:"log fixed right-6 top-[8px] text-gray-600 hover:text-gray-950 cursor-pointer z-30 text-2xl hidden sm:block",onClick:()=>{g(!0),i(!1)},children:" + "})]}),!l&&(0,b.jsxs)("div",{className:"flex flex-row add items-center fixed top-0 right-8 z-50",children:[(0,b.jsx)("button",{className:"log text-2xl cursor-pointer text-gray-700 z-50 relative top-2",onClick:()=>o(!0),children:" + "}),n&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"log text-2xl cursor-pointer text-gray-700 z-50 absolute lpt:top-[.45rem] md:-left-[21rem] top-[3.4rem] -left-1 backdrop-blur px-2",onClick:()=>o(!1),children:"x"}),(0,b.jsx)(f,{})]})]}),(0,b.jsx)("nav",{style:{viewTransitionName:"main-nav"},children:(0,b.jsx)("ul",{className:"items-start md:items-center justify-center z-10 relative xl:w-fit w-[90svw] mx-auto [&_li.active]:text-white mt-3 ml-3 bg-[#0003] rounded-2xl",children:j.map((a,c)=>{let d=k(a),e=d===p;return(0,b.jsx)(J.default,{href:`/${d}`,passHref:!0,legacyBehavior:!1,children:(0,b.jsx)("li",{className:`${e?"active":""} md:text-lg text-[.7rem] font-[400] text-white/90 py-1 sm:py-3 px-2 sm:px-5 hover:text-white hover:[text-shadow:0_0_10px_white] uppercase cursor-pointer`,style:{viewTransitionName:e?"active-category":""},children:a})},c)})})})]})}var M=a.i(17264);function N({children:a}){return(0,b.jsxs)(c.AppProvider,{children:[(0,b.jsx)(M.default,{}),(0,b.jsx)(L,{}),a]})}a.s(["default",()=>N],83556)}];

//# sourceMappingURL=src_components_ClientLayout_jsx_876a7c50._.js.map