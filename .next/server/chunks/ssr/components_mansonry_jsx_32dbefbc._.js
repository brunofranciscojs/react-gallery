module.exports=[50635,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(90617),e=a.i(20178);function f(){return(0,b.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{d:"M5.73708 6.54391V18.9857C5.73708 19.7449 6.35257 20.3604 7.11182 20.3604H16.8893C17.6485 20.3604 18.264 19.7449 18.264 18.9857V6.54391M2.90906 6.54391H21.0909",stroke:"#1C1C1C",strokeWidth:"1.7",strokeLinecap:"round"}),(0,b.jsx)("path",{d:"M8 6V4.41421C8 3.63317 8.63317 3 9.41421 3H14.5858C15.3668 3 16 3.63317 16 4.41421V6",strokeWidth:"2",strokeLinecap:"round"})]})}function g(){return(0,b.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,b.jsx)("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),(0,b.jsx)("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),(0,b.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[(0,b.jsx)("path",{d:"M17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L20.4369 8.60845L15.3916 3.56308L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z",fill:"#000000"}),(0,b.jsx)("path",{d:"M13.9774 4.9773L3.6546 15.3001C3.53154 15.4231 3.44273 15.5762 3.39694 15.7441L2.03526 20.7369C1.94084 21.0831 2.03917 21.4534 2.29292 21.7071C2.54667 21.9609 2.91693 22.0592 3.26314 21.9648L8.25597 20.6031C8.42387 20.5573 8.57691 20.4685 8.69996 20.3454L19.0227 10.0227L13.9774 4.9773Z",fill:"#000000"})]})]})}var h=a.i(58610);function j(){return(0,b.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 16 16",fill:"#fff",children:[(0,b.jsx)("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),(0,b.jsx)("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),(0,b.jsx)("g",{id:"SVGRepo_iconCarrier",children:(0,b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.221 3.739l2.261 2.269L7.7 3.784l-.7-.7-1.012 1.007-.008-1.6a.523.523 0 0 1 .5-.526H8V1H6.48A1.482 1.482 0 0 0 5 2.489V4.1L3.927 3.033l-.706.706zm6.67 1.794h.01c.183.311.451.467.806.467.393 0 .706-.168.94-.503.236-.335.353-.78.353-1.333 0-.511-.1-.913-.301-1.207-.201-.295-.488-.442-.86-.442-.405 0-.718.194-.938.581h-.01V1H9v4.919h.89v-.386zm-.015-1.061v-.34c0-.248.058-.448.175-.601a.54.54 0 0 1 .445-.23.49.49 0 0 1 .436.233c.104.154.155.368.155.643 0 .33-.056.587-.169.768a.524.524 0 0 1-.47.27.495.495 0 0 1-.411-.211.853.853 0 0 1-.16-.532zM9 12.769c-.256.154-.625.231-1.108.231-.563 0-1.02-.178-1.369-.533-.349-.355-.523-.813-.523-1.374 0-.648.186-1.158.56-1.53.374-.376.875-.563 1.5-.563.433 0 .746.06.94.179v.998a1.26 1.26 0 0 0-.792-.276c-.325 0-.583.1-.774.298-.19.196-.283.468-.283.816 0 .338.09.603.272.797.182.191.431.287.749.287.282 0 .558-.092.828-.276v.946zM4 7L3 8v6l1 1h7l1-1V8l-1-1H4zm0 1h7v6H4V8z"})})]})}var k=a.i(50944);let l=(0,c.memo)(function({url:a,cat:d,index:l,name:m,colors:n,setDcolor:o,setUpWindow:p,setNova:q,id:r,array:s,width:t,height:u}){let{logado:v}=(0,e.default)(),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),E=(0,k.useRouter)(),F=t&&u?`${t}/${u}`:"auto",G=async b=>{let c=a.split("/ilustras/")[1],d=c.split("/")[0],e=`${d}/${b}`,{data:f,error:g}=await h.supabase.storage.from("ilustras").download(c);if(g)return void console.error("Erro ao baixar o arquivo:",g);let{data:j,error:k}=await h.supabase.storage.from("ilustras").upload(e,f);if(k)return void console.error("Erro ao fazer upload com o novo nome:",k);let l=`https://utyaegtlratnhymumqjm.supabase.co/storage/v1/object/public/ilustras/${e}`,{error:m}=await h.supabase.from("imagens").update({url:l,nome:b}).eq("url",a);if(m)return void console.error("Erro ao atualizar no banco:",m);let{error:n}=await h.supabase.storage.from("ilustras").remove([c]);n?console.error("Erro ao excluir o arquivo antigo:",n):(console.log("Arquivo renomeado com sucesso!"),B(!0))},H=async a=>{let b=a.split("/ilustras/")[1],{error:c}=await h.supabase.storage.from("ilustras").remove([b]);if(c)return void console.error("Erro ao excluir do storage:",c);let{error:d}=await h.supabase.from("imagens").delete().eq("url",a);d?console.error("Erro ao excluir do banco:",d):console.log("Arquivo excluÃ­do com sucesso!")};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("figure",{style:{"--cor":n[0],"--bg":n[0]+22,"--index":l+40},className:"item grid place-items-center group shadow-none relative group backdrop-blur-sm",children:[v&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"absolute top-7 left-4 [&>svg_path]:fill-none [&>svg_path]:stroke-gray-800 duration-150 opacity-0 group-hover:opacity-100 z-50",onClick:()=>x(!0),children:(0,b.jsx)(f,{})}),(0,b.jsx)("button",{className:"absolute top-7 right-4 [&>svg_path]:fill-none [&>svg_path]:stroke-gray-800 duration-150 opacity-0 group-hover:opacity-100 z-50",onClick:()=>{x(!0),z(!0)},children:(0,b.jsx)(g,{})})]}),(0,b.jsxs)("div",{className:`[clip-path:url(#squircle-mask)] [-webkit-clip-path:url(#squircle-mask)] bg-[--bg] relative overflow-hidden ${C?"loaded":""}`,onClick:()=>{let a=`/${d.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")}/${r}?bgc=${encodeURIComponent(n[0])}`;E.push(a)},style:{aspectRatio:F},children:[(0,b.jsx)("article",{className:"absolute inset-0 transition-all duration-400 animate-[placehold_calc(var(--index)*0.1s)_linear_infinite_forwards] bg-size-[268px_100%] bg-[--bg] bg-[linear-gradient(to_right,#bbb_-10%,var(--bg)_18%,#bbb_53%)] blur-[15px] placeholder"}),(0,b.jsx)("img",{src:a,loading:"lazy",decoding:"async",className:"mix-blend-darken transition-all duration-500 opacity-0",onLoad:()=>setTimeout(()=>D(!0),100)})]}),(0,b.jsx)("figcaption",{style:{viewTransitionName:`caption-${r}`},className:"flex flex-col justify-end text-left",children:(0,b.jsxs)("fieldset",{children:[(0,b.jsx)("legend",{className:"text-xs leading-none text-gray-50 ",children:d}),(0,b.jsx)("span",{className:"text-base text-gray-50 font-semibold !leading-[1] block text-balance",children:m})]})})]}),w&&!y&&(0,b.jsx)("div",{className:"fixed bg-[#00000066] w-full h-[100dvh] top-0 left-0 z-[999999] grid place-items-center prompt",children:(0,b.jsxs)("div",{className:"flex flex-col justify-center items-center bg-gray-200/30 backdrop-blur-md rounded-xl px-10 py-5 gap-4 max-w-[300px] w-[90%] border-gray-400/60 border-2 shadow-2xl",children:[(0,b.jsx)("h2",{className:"font-semibold text-gray-50",children:"TEM CERTEZA?"}),(0,b.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>{H(a),x(!1)},className:"bg-black px-4 py-2 text-white text-sm rounded-lg",children:" DELETAR"}),(0,b.jsx)("button",{onClick:()=>x(!1),className:"bg-white px-4 py-2 text-black text-sm rounded-lg",children:"CANCELAR"})]})]})}),w&&y&&(0,b.jsx)("div",{className:"fixed bg-[#00000066] w-full h-[100dvh] top-0 left-0 z-[999999] grid place-items-center prompt",children:(0,b.jsxs)("div",{className:"flex flex-col justify-center items-center bg-[#444a] rounded-xl px-10 py-5 gap-4 max-w-[300px] w-[90%] border-gray-400/60 border-2 shadow-2xl relative backdrop-blur-md",children:[(0,b.jsx)("button",{className:"absolute right-2 top-0 text-white border-0 text-base z-50 cursor-pointer",onClick:()=>x(!1),children:"x"}),!A&&(0,b.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,b.jsx)("input",{onBlur:a=>a.target.value.length>0?G(a.target.value):console.log("nada alterado"),placeholder:"NOVO NOME",className:"bg-white/30 px-4 py-2 text-white text-sm rounded-lg placeholder:text-gray-200"}),(0,b.jsx)("button",{onClick:()=>{p(!0),q(!0),localStorage.setItem("urlEditar",a)},children:(0,b.jsx)(j,{})})]}),A&&(0,b.jsx)("span",{children:"Renomeado com sucesso!"})]})})]})});var m=function(a,b){return a<b?-1:+(a>b)},n=function(a){return a.reduce(function(a,b){return a+b},0)},o=function(){function a(a){this.colors=a}var b=a.prototype;return b.palette=function(){return this.colors},b.map=function(a){return a},a}(),p=function(){function a(a,b,c){return(a<<10)+(b<<5)+c}function b(a){var b=[],c=!1;function d(){b.sort(a),c=!0}return{push:function(a){b.push(a),c=!1},peek:function(a){return c||d(),void 0===a&&(a=b.length-1),b[a]},pop:function(){return c||d(),b.pop()},size:function(){return b.length},map:function(a){return b.map(a)},debug:function(){return c||d(),b}}}function c(a,b,c,d,e,f,g){this.r1=a,this.r2=b,this.g1=c,this.g2=d,this.b1=e,this.b2=f,this.histo=g}function d(){this.vboxes=new b(function(a,b){return m(a.vbox.count()*a.vbox.volume(),b.vbox.count()*b.vbox.volume())})}return c.prototype={volume:function(a){return this._volume&&!a||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(b){var c=this.histo;if(!this._count_set||b){var d,e,f,g=0;for(d=this.r1;d<=this.r2;d++)for(e=this.g1;e<=this.g2;e++)for(f=this.b1;f<=this.b2;f++)g+=c[a(d,e,f)]||0;this._count=g,this._count_set=!0}return this._count},copy:function(){return new c(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(b){var c=this.histo;if(!this._avg||b){var d,e,f,g,h=0,j=0,k=0,l=0;if(this.r1===this.r2&&this.g1===this.g2&&this.b1===this.b2)this._avg=[this.r1<<3,this.g1<<3,this.b1<<3];else{for(e=this.r1;e<=this.r2;e++)for(f=this.g1;f<=this.g2;f++)for(g=this.b1;g<=this.b2;g++)h+=d=c[a(e,f,g)]||0,j+=d*(e+.5)*8,k+=d*(f+.5)*8,l+=d*(g+.5)*8;this._avg=h?[~~(j/h),~~(k/h),~~(l/h)]:[~~(8*(this.r1+this.r2+1)/2),~~(8*(this.g1+this.g2+1)/2),~~(8*(this.b1+this.b2+1)/2)]}}return this._avg},contains:function(a){var b=a[0]>>3;return gval=a[1]>>3,bval=a[2]>>3,b>=this.r1&&b<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}},d.prototype={push:function(a){this.vboxes.push({vbox:a,color:a.avg()})},palette:function(){return this.vboxes.map(function(a){return a.color})},size:function(){return this.vboxes.size()},map:function(a){for(var b=this.vboxes,c=0;c<b.size();c++)if(b.peek(c).vbox.contains(a))return b.peek(c).color;return this.nearest(a)},nearest:function(a){for(var b,c,d,e=this.vboxes,f=0;f<e.size();f++)((c=Math.sqrt(Math.pow(a[0]-e.peek(f).color[0],2)+Math.pow(a[1]-e.peek(f).color[1],2)+Math.pow(a[2]-e.peek(f).color[2],2)))<b||void 0===b)&&(b=c,d=e.peek(f).color);return d},forcebw:function(){var a=this.vboxes;a.sort(function(a,b){return m(n(a.color),n(b.color))});var b=a[0].color;b[0]<5&&b[1]<5&&b[2]<5&&(a[0].color=[0,0,0]);var c=a.length-1,d=a[c].color;d[0]>251&&d[1]>251&&d[2]>251&&(a[c].color=[255,255,255])}},{quantize:function(e,f){if(!Number.isInteger(f)||f<1||f>256)throw Error("Invalid maximum color count. It must be an integer between 1 and 256.");if(!e.length||f<2||f>256||!e.length||f<2||f>256)return!1;for(var g,h,j,k,l,n,p,q,r,s,t,u=[],v=new Set,w=0;w<e.length;w++){var x=e[w],y=x.join(",");v.has(y)||(v.add(y),u.push(x))}if(u.length<=f)return new o(u);var z=(h=Array(32768),e.forEach(function(b){h[g=a(b[0]>>3,b[1]>>3,b[2]>>3)]=(h[g]||0)+1}),h);z.forEach(function(){});var A=(n=1e6,p=0,q=1e6,r=0,s=1e6,t=0,e.forEach(function(a){(j=a[0]>>3)<n?n=j:j>p&&(p=j),(k=a[1]>>3)<q?q=k:k>r&&(r=k),(l=a[2]>>3)<s?s=l:l>t&&(t=l)}),new c(n,p,q,r,s,t,z)),B=new b(function(a,b){return m(a.count(),b.count())});function C(b,c){for(var d,e=b.size(),f=0;f<1e3;){if(e>=c||f++>1e3)return;if((d=b.pop()).count()){var g=function(b,c){if(c.count()){var d=c.r2-c.r1+1,e=c.g2-c.g1+1,f=Math.max.apply(null,[d,e,c.b2-c.b1+1]);if(1==c.count())return[c.copy()];var g,h,j,k,l=0,m=[],n=[];if(f==d)for(g=c.r1;g<=c.r2;g++){for(k=0,h=c.g1;h<=c.g2;h++)for(j=c.b1;j<=c.b2;j++)k+=b[a(g,h,j)]||0;m[g]=l+=k}else if(f==e)for(g=c.g1;g<=c.g2;g++){for(k=0,h=c.r1;h<=c.r2;h++)for(j=c.b1;j<=c.b2;j++)k+=b[a(h,g,j)]||0;m[g]=l+=k}else for(g=c.b1;g<=c.b2;g++){for(k=0,h=c.r1;h<=c.r2;h++)for(j=c.g1;j<=c.g2;j++)k+=b[a(h,j,g)]||0;m[g]=l+=k}return m.forEach(function(a,b){n[b]=l-a}),function(a){var b,d,e,f,h,j=a+"1",k=a+"2",o=0;for(g=c[j];g<=c[k];g++)if(m[g]>l/2){for(e=c.copy(),f=c.copy(),h=(b=g-c[j])<=(d=c[k]-g)?Math.min(c[k]-1,~~(g+d/2)):Math.max(c[j],~~(g-1-b/2));!m[h];)h++;for(o=n[h];!o&&m[h-1];)o=n[--h];return e[k]=h,f[j]=e[k]+1,[e,f]}}(f==d?"r":f==e?"g":"b")}}(z,d),h=g[0],j=g[1];if(!h)return;b.push(h),j&&(b.push(j),e++)}else b.push(d),f++}}B.push(A),C(B,.75*f);for(var D=new b(function(a,b){return m(a.count()*a.volume(),b.count()*b.volume())});B.size();)D.push(B.pop());C(D,f);for(var E=new d;D.size();)E.push(D.pop());return E}}}().quantize,q=function(a){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=a.naturalWidth,this.height=this.canvas.height=a.naturalHeight,this.context.drawImage(a,0,0,this.width,this.height)};q.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var r=function(){};r.prototype.getColor=function(a,b){return void 0===b&&(b=10),this.getPalette(a,5,b)[0]},r.prototype.getPalette=function(a,b,c){var d=function(a){var b=a.colorCount,c=a.quality;if(void 0!==b&&Number.isInteger(b)){if(1===b)throw Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");b=Math.min(b=Math.max(b,2),20)}else b=10;return(void 0===c||!Number.isInteger(c)||c<1)&&(c=10),{colorCount:b,quality:c}}({colorCount:b,quality:c}),e=new q(a),f=p(function(a,b,c){for(var d,e,f,g,h,j=[],k=0;k<b;k+=c)e=a[0+(d=4*k)],f=a[d+1],g=a[d+2],(void 0===(h=a[d+3])||h>=125)&&(e>250&&f>250&&g>250||j.push([e,f,g]));return j}(e.getImageData().data,e.width*e.height,d.quality),d.colorCount);return f?f.palette():null},r.prototype.getColorFromUrl=function(a,b,c){var d=this,e=document.createElement("img");e.addEventListener("load",function(){b(d.getPalette(e,5,c)[0],a)}),e.src=a},r.prototype.getImageData=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="arraybuffer",c.onload=function(){if(200==this.status){var a=new Uint8Array(this.response);i=a.length;for(var c=Array(i),d=0;d<a.length;d++)c[d]=String.fromCharCode(a[d]);var e=c.join("");b("data:image/png;base64,"+window.btoa(e))}},c.send()},r.prototype.getColorAsync=function(a,b,c){var d=this;this.getImageData(a,function(a){var e=document.createElement("img");e.addEventListener("load",function(){b(d.getPalette(e,5,c)[0],this)}),e.src=a})},a.i(39784),a.s(["default",0,({category:a,initialImages:e=[]})=>{let{setUpWindow:f,setNova:g}=(0,d.useAppContext)(),[h,j]=(0,c.useState)(e),[k,m]=(0,c.useState)([]),[n,o]=(0,c.useState)("#0005");return(0,c.useEffect)(()=>{j(e)},[e]),(0,c.useEffect)(()=>{(async()=>{h.length&&m(await Promise.all(h.map(async a=>{let b=`palette-${a.url}`,c=`size-${a.url}`,d=localStorage.getItem(b),e=localStorage.getItem(c);if(d&&e){let b=JSON.parse(e);return{url:a.url,colors:JSON.parse(d),name:a.nome,id:a.id,width:b.width,height:b.height}}let f=new Image;return f.crossOrigin="Anonymous",f.src=a.url,new Promise(d=>{let e={url:a.url,name:a.nome,id:a.id};f.onload=()=>{let a=new r().getPalette(f,3).map(a=>`#${a.map(a=>a.toString(16).padStart(2,"0")).join("")}`),g={width:f.naturalWidth,height:f.naturalHeight};localStorage.setItem(b,JSON.stringify(a)),localStorage.setItem(c,JSON.stringify(g)),d({...e,colors:a,width:g.width,height:g.height})},f.onerror=()=>d({...e,colors:["#cccccc"],width:400,height:400})})})))})()},[h]),(0,b.jsx)("div",{className:"mansonry z-10 [&:has(.prompt)_figure]:grayscale h-auto py-14 px-5",children:k.map(({url:c,colors:d,name:e,id:h,width:j,height:k},m,n)=>(0,b.jsx)(l,{array:n,url:c,cat:a,index:m,name:e,colors:d,setDcolor:o,setUpWindow:f,setNova:g,id:h,width:j,height:k},m))},"mansonry")}],50635)}];

//# sourceMappingURL=components_mansonry_jsx_32dbefbc._.js.map